# =============================================================================
# VOICE ASSISTANT v2 CONFIGURATION
# =============================================================================
# Copy this file to .env and adjust values for your setup

# =============================================================================
# MODEL PATHS (Required - download models first)
# =============================================================================
LLM_MODEL_PATH=models/llm/llama-3.2-1b-instruct-q4_k_m.gguf
TTS_MODEL_PATH=models/tts/en_US-amy-medium.onnx
# STT model is downloaded automatically by faster-whisper

# =============================================================================
# AUDIO SETTINGS
# =============================================================================
AUDIO_SAMPLE_RATE=16000
AUDIO_CHANNELS=1
AUDIO_FRAME_MS=20
# AUDIO_INPUT_DEVICE=           # Leave empty for default, or set device index

# =============================================================================
# NOISE REDUCTION (Important for crowded places)
# =============================================================================
NOISE_GATE_ENABLED=true
NOISE_GATE_THRESHOLD=0.01       # RMS threshold, 0.01-0.05 typical
NOISE_ADAPTIVE=true             # Automatically adjust to noise floor
NOISE_ADAPTATION_RATE=0.05      # How fast to adapt (0.01-0.1)

# =============================================================================
# SPEAKER ISOLATION (Key feature for crowded places)
# =============================================================================
SPEAKER_ISOLATION_ENABLED=true
SPEAKER_VOLUME_THRESHOLD=0.1    # Minimum RMS to consider speech
SPEAKER_CONSISTENCY_WINDOW=10   # Frames to track speaker
SPEAKER_MIN_SPEECH_RATIO=0.6    # 60% frames must be speech to lock

# =============================================================================
# VOICE ACTIVITY DETECTION
# =============================================================================
VAD_AGGRESSIVENESS=2            # 0=least, 3=most aggressive (use 2-3 for noisy)
VAD_ENERGY_THRESHOLD=0.01       # RMS threshold for noise gate
VAD_SMOOTH_WINDOW=5             # Frames to smooth decisions

# =============================================================================
# SPEECH SEGMENTATION
# =============================================================================
START_TRIGGER_FRAMES=3          # Consecutive speech frames to start
END_SILENCE_MS=1000             # Silence duration to end utterance
MIN_UTTERANCE_MS=300            # Minimum valid utterance length
MAX_UTTERANCE_MS=15000          # Maximum utterance (15 seconds)

# =============================================================================
# SPEECH-TO-TEXT
# =============================================================================
STT_MODEL=tiny                  # tiny, tiny.en, base, small
STT_DEVICE=cpu                  # cpu or cuda
STT_COMPUTE_TYPE=int8           # int8 (fast), float16, float32
STT_BEAM_SIZE=1                 # 1 for speed, 3-5 for accuracy
STT_LANGUAGE=en                 # Set language or leave empty for auto

# =============================================================================
# LANGUAGE MODEL
# =============================================================================
LLM_CONTEXT_TOKENS=2048         # Context window size
LLM_MAX_TOKENS=150              # Max response tokens
LLM_TEMPERATURE=0.7             # Creativity (0.1-1.0)
LLM_THREADS=4                   # CPU threads (adjust for your CPU)
LLM_GPU_LAYERS=0                # 0 for CPU-only

# =============================================================================
# TEXT-TO-SPEECH
# =============================================================================
TTS_LENGTH_SCALE=1.0            # Speed: <1 faster, >1 slower
TTS_NOISE_SCALE=0.667           # Variation in pronunciation
TTS_NOISE_W_SCALE=0.8           # Variation in duration
TTS_VOLUME=1.0                  # Output volume (0.0-1.0)
# TTS_OUTPUT_DEVICE=            # Leave empty for default

# =============================================================================
# WAKE WORD (Optional - best for crowded places)
# =============================================================================
WAKE_WORD_ENABLED=false
WAKE_WORDS=hey assistant,okay assistant
WAKE_WORD_TIMEOUT=10            # Seconds to listen after wake word

# =============================================================================
# CONVERSATION
# =============================================================================
MAX_TURNS=6                     # Conversation history length
MAX_CHARS_PER_MSG=500           # Max characters per message
SYSTEM_PROMPT=You are a helpful voice assistant. Keep responses brief and conversational.

# =============================================================================
# DEBUG & LOGGING
# =============================================================================
DEBUG_AUDIO=false               # Save audio files for debugging
DEBUG_VAD=false                 # Print VAD decisions
DEBUG_TIMING=false              # Print component latencies
DEBUG_LOG_DIR=logs/debug
